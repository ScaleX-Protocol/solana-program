# OpenBook Indexer Configuration - MAINNET
# This file configures the indexer to use shared infrastructure from monitoring-tools

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================
NETWORK=mainnet
SOLANA_RPC_URL=https://api.mainnet-beta.solana.com
SOLANA_WS_URL=wss://api.mainnet-beta.solana.com

# =============================================================================
# DATABASE CONFIGURATION - Using shared infrastructure from monitoring-tools
# =============================================================================

# PostgreSQL (managed by monitoring-tools)
DATABASE_URL=postgresql://postgres:password@postgres-database:5432/openbook_mainnet
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password
OPENBOOK_DATABASE=openbook_mainnet

# Redis (managed by monitoring-tools)
REDIS_URL=redis://redis:6379
REDIS_CACHE_TTL=300

# TimescaleDB (managed by monitoring-tools)
TIMESCALE_DATABASE_URL=postgresql://postgres:password@timescaledb:5432/analytics_openbook_mainnet
OPENBOOK_ANALYTICS_DATABASE=analytics_openbook_mainnet

# =============================================================================
# OPENBOOK PROGRAM CONFIGURATION
# =============================================================================

# Get program ID from deployments/mainnet.json
OPENBOOK_PROGRAM_ID=opnb2LAfJYbRMAHHvqjCwQxanZn7ReEHp1k81EohpZb
METAPLEX_PROGRAM_ID=metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s

# =============================================================================
# INDEXER SETTINGS
# =============================================================================

# Start block for indexing
START_BLOCK=0

# Indexer port
INDEXER_PORT=42090

# Batch processing
BATCH_SIZE=100
POLL_INTERVAL=1000

# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================

ENABLE_WEBSOCKET=true
WEBSOCKET_PORT=42091
WS_PING_INTERVAL=30000
RECONNECT_INTERVAL=3000
MAX_CONNECTIONS=1000

# Consumer groups (for Redis Streams)
CONSUMER_GROUP=mainnet-openbook-websocket-consumers
CONSUMER_ID=ws-consumer-1

# =============================================================================
# ANALYTICS CONFIGURATION
# =============================================================================

ANALYTICS_PORT=42092
ANALYTICS_BATCH_SIZE=5
ANALYTICS_POLL_INTERVAL=5000
CACHE_TTL=300
ENABLE_DAILY_SNAPSHOTS=true
ENABLE_HOURLY_AGGREGATION=true
ENABLE_CACHE_REFRESH=true

# =============================================================================
# MONITORING & LOGGING
# =============================================================================

DEBUG_MODE=false
LOG_LEVEL=warn
ENABLE_METRICS=true
METRICS_PORT=9090

# =============================================================================
# DEPLOYMENT METADATA
# =============================================================================

DEPLOYMENT_ENV=production
DEPLOYMENT_TYPE=indexer
