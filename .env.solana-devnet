# OpenBook Indexer Configuration
# This file configures the indexer to use shared infrastructure from monitoring-tools

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================
NETWORK=devnet
SOLANA_RPC_URL=https://api.devnet.solana.com
SOLANA_WS_URL=wss://api.devnet.solana.com

# =============================================================================
# DATABASE CONFIGURATION - Using shared infrastructure from monitoring-tools
# =============================================================================

# PostgreSQL (managed by monitoring-tools)
DATABASE_URL=postgresql://postgres:password@postgres-database:5432/openbook_devnet
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password
OPENBOOK_DATABASE=openbook_devnet

# Redis (managed by monitoring-tools)
REDIS_URL=redis://redis:6379
REDIS_CACHE_TTL=300

# TimescaleDB (managed by monitoring-tools)
TIMESCALE_DATABASE_URL=postgresql://postgres:password@timescaledb:5432/analytics_openbook_devnet
OPENBOOK_ANALYTICS_DATABASE=analytics_openbook_devnet

# =============================================================================
# OPENBOOK PROGRAM CONFIGURATION
# =============================================================================

# Get program ID from deployments/devnet.json
OPENBOOK_PROGRAM_ID=GesS1wVm85uRvvjYDAgCVK9MJU5icjsX3LX6GMfibKW1
METAPLEX_PROGRAM_ID=metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s

# =============================================================================
# INDEXER SETTINGS
# =============================================================================

# Start block for indexing
START_BLOCK=0

# Indexer API port
API_PORT=42090
INDEXER_PORT=42090  # Legacy, use API_PORT

# Batch processing
BATCH_SIZE=100
POLL_INTERVAL=1000

# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================

ENABLE_WEBSOCKET=true
WEBSOCKET_PORT=42091
WS_PING_INTERVAL=30000
RECONNECT_INTERVAL=3000
MAX_CONNECTIONS=1000

# Consumer groups (for Redis Streams)
CONSUMER_GROUP=devnet-openbook-websocket-consumers
CONSUMER_ID=ws-consumer-1

# =============================================================================
# ANALYTICS CONFIGURATION
# =============================================================================

ANALYTICS_PORT=42092
ANALYTICS_BATCH_SIZE=5
ANALYTICS_POLL_INTERVAL=5000
CACHE_TTL=300
ENABLE_DAILY_SNAPSHOTS=true
ENABLE_HOURLY_AGGREGATION=true
ENABLE_CACHE_REFRESH=true

# =============================================================================
# MONITORING & LOGGING
# =============================================================================

DEBUG_MODE=true
LOG_LEVEL=info
ENABLE_METRICS=true
METRICS_PORT=9090

# =============================================================================
# DEPLOYMENT METADATA
# =============================================================================

DEPLOYMENT_ENV=production
DEPLOYMENT_TYPE=indexer
